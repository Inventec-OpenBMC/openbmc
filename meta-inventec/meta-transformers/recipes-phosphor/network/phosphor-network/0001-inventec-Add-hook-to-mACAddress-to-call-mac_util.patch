From fb5c55808fe773f74e83dfb9fd198c11c6996aa7 Mon Sep 17 00:00:00 2001
From: "pj.chen" <chen.pj@inventec.com>
Date: Thu, 21 Jan 2021 07:13:17 +0000
Subject: [PATCH 6/6] - Add hook to mACAddress to call mac_util

---
 ethernet_interface.cpp | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/ethernet_interface.cpp b/ethernet_interface.cpp
index b29dc07..f1b769a 100644
--- a/ethernet_interface.cpp
+++ b/ethernet_interface.cpp
@@ -1199,6 +1199,11 @@ std::string EthernetInterface::macAddress(std::string value)
         execute("/sbin/ip", "ip", "link", "set", "dev", interface.c_str(),
                 "down");
         manager.writeToConfigurationFile();
+        /* Inventec hook for mac setting */
+        if (interfaceName() == "eth0") {
+            execute("/usr/bin/mac_util", "w", value.c_str());
+
+        }
     }
 
 #ifdef HAVE_UBOOT_ENV
-- 
2.7.4

